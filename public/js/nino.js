(()=>{"use strict";class t{constructor(){}static init(s){["keydown","keyup"].forEach((s=>{window.addEventListener(s,(s=>{t.t(s)}))})),["mousedown","mouseup"].forEach((s=>{window.addEventListener(s,(s=>{t.i(s)}))})),document.addEventListener("mousemove",(e=>{var i=s.getBoundingClientRect();t.o=Math.round(e.clientX-i.left),t.h=Math.round(e.clientY-i.top)}))}static l(s){return!(!t.u.get(s)||t.pressed.get(s))&&(t.pressed.set(s,!0),!0)}static m(s){return t.u.get(s)}static t(s){s.preventDefault();const e={key:s.key,state:"keydown"===s.type?1:0};t.u.get(e.key)!==e.state&&(e.state||t.pressed.set(e.key,!1),t.u.set(e.key,e.state))}static p(s){return!(!t.g.get(s)||t.M.get(s))&&(t.M.set(s,!0),!0)}static i(s){s.preventDefault();const e={key:"b",state:"mousedown"===s.type?1:0};t.g.get(e.key)!==e.state&&(e.state||t.M.set(e.key,!1),t.g.set(e.key,e.state))}static v(s,e){return s.x<t.o&&s.x+e>t.o&&s.y<t.h&&s.y+e>t.h}}t.o=0,t.h=0,t.onclick=!1,t.u=new Map,t.pressed=new Map,t.g=new Map,t.M=new Map;const s=t;class e{constructor(){}static create(t,s,i,a){let n=document.createElement("canvas");n.id=t,n.width=s,n.height=i,n.style.zIndex=a.toString(),e.k.set(t,n)}static get(t){return e.get(t)}}e.k=new Map;class i{constructor(t,s,e,i,a,n){this.T=t,this.$=s,this.j=e,this.width=i,this.height=a,this.scale=n}G(t,s,e){let i=e.x,a=e.y;t.drawImage(this.T,this.$*this.width,this.j*this.height,this.width,this.height,i,a,this.width*this.scale,this.height*this.scale)}}class a{constructor(){a.I=new Map,a.O=new Map}async P(){for(const[t,s]of a.I.entries()){let e=await a.B(s);a.I.set(t,e)}for(const[t,s]of a.O.entries()){let e=await a.B(s.src),n=new i(e,s.x,s.y,s.w,s.C,s.s);a.O.set(t,n)}}preload(){}static B(t){return new Promise((s=>{const e=new Image;e.addEventListener("load",(()=>s(e))),e.src=t}))}static T(t){const{key:s,src:e}=t;if(a.I.has(s))return h.H(`The identifier "${s}" already exists`);a.I.set(s,e)}static L(t){let s=a.I.get(t);return s||h.H(`The identifier "${t}" does not match any element`)}static S(t){const{key:s,src:e,q:{x:i,y:n,width:r,height:o,scale:c}}=t;if(a.O.has(s))return h.H(`The identifier "${s}" already exists`);a.O.set(s,{src:e,x:i,y:n,w:r,C:o,s:c})}static A(t){let s=a.O.get(t);return s||h.H(`The identifier "${t}" does not match any element`)}}class n{constructor(t){const{id:s}=t;this.id=s,this.mask={width:null,height:null}}init(){}static J(t){n.entities[t]=[]}static N(t){return n.entities[t]}static create(t,s,e){const i=new s({id:n.R()});return n.entities[t].push(i),i}static D(t){for(const[s,e]of n.entities.entries())if(e.id===t.id){n.entities.splice(s,1);break}}static R(){return++n.F}}n.entities={},n.F=0;class r{constructor(t,s){this.K=t,this.U=s,this.V=30,this.W=1e3/this.V,this.X=performance.now(),this.Y=0}init(){window.requestAnimationFrame((t=>{this.Z(t)}))}Z(t){const s=t-this.X;this.X=t,this.Y+=s;let e=0;for(;this.Y>=this.W;)if(this.K(this.W),this._(this.W),this.Y-=this.W,e++>=200){this.Y=0;break}const i=this.Y/this.W;this.tt(i),this.U(i),window.requestAnimationFrame((t=>{this.Z(t)}))}_(t){}tt(t){}}class o{constructor(){}static color(t){o.st.fillStyle=t}static rect(t,s,e,i){o.st.fillRect(t,s,e,i)}static et(t,s,e){o.st.beginPath(),o.st.arc(t,s,e,0,2*Math.PI),o.st.fill()}static T(t,s,e){o.st.drawImage(e,t,s)}}o.it="white",o.nt="black",o.red="red",o.blue="blue",o.green="green",o.rt="yellow",o.ot="lime",o.ct="cyan";class c{constructor(t){if(c.ht)return c.ht;c.ht=this,this.canvas=document.createElement("canvas"),this.canvas.id="canvas-elements",this.canvas.width=t.width,this.canvas.height=t.height,this.canvas.style.display="block",this.canvas.style.margin="auto",this.canvas.style.zIndex="1",this.st=this.canvas.getContext("2d"),this.backgroundColor=t.backgroundColor??"#374a52",c.lt.st=this.st,c.screen={width:t.width,height:t.height},this.ut=t.ut,this.dt=new a,this.wt=new r(this.ut.update,this.ut.G),this.ft=new e,window.addEventListener("load",(()=>{this.init()}))}init(){console.log("%c Nino.JS v1.3.0 ","color: black; font-weight: 900; background-color: aquamarine"),this.ut.load(),this.dt.P().then((()=>{const t=Object.keys(c.Entity.entities);for(let s=0;s<t.length;++s){const e=c.Entity.entities[t[s]];for(let t=0;t<e.length;++t)e[t].init()}document.body.appendChild(this.canvas),this.wt._=t=>this._(t),this.wt.tt=t=>this.tt(t),c.gt.init(this.canvas),this.wt.init()}))}_(t){const s=Object.keys(c.Entity.entities);for(let e=0;e<s.length;++e){const i=c.Entity.entities[s[e]];for(let s=0;s<i.length;++s)i[s].update(t)}}tt(t){this.st.clearRect(0,0,this.canvas.width,this.canvas.height),this.st.fillStyle=this.backgroundColor,this.st.fillRect(0,0,this.canvas.width,this.canvas.height);const s=Object.keys(c.Entity.entities);for(let e=0;e<s.length;++e){const i=c.Entity.entities[s[e]];for(let s=0;s<i.length;++s)i[s].G(t)}}static H(t){return console.warn(t),null}}c.Mt=a,c.Entity=n,c.gt=s,c.Math=class{constructor(){}static yt(t){const s=[...t];for(let t=s.length-1;t>0;--t){const e=Math.floor(Math.random()*(t+1));[s[t],s[e]]=[s[e],s[t]]}return s}static vt(t){const{min:s,max:e}=t;return Math.floor(Math.random()*(e-s+1))+s}static kt(t){const{bt:s,xt:e,smooth:i}=t;return(1-i)*s+i*e}static Tt(t){const{value:s,min:e,max:i}=t;return Math.min(Math.max(s,e),i)}static map(t){const{value:s,$t:e,jt:i,Gt:a,It:n}=t,r=(s-e)*(n-a)/(i-e)+a;return this.Tt({value:r,min:a,max:n})}static Ot(t,s,e){const i=[];for(let e=0;e<s;++e)for(let s=0;s<t;++s)i[e]=[];if(null!=e)for(let a=0;a<s;++a)for(let s=0;s<t;++s)i[a][s]=e;return i}static Pt(t){for(var s=0;s<t.length;++s)for(var e=0;e<t[s].length;++e){const i=Math.floor(Math.random()*t.length),a=Math.floor(Math.random()*t.length),n=t[s][e];t[s][e]=t[i][a],t[i][a]=n}}},c.Bt=e,c.lt=o,c.screen={width:0,height:0};const h=c;class l extends h.Entity{init(){this.S=h.Mt.L("apple"),this.x=0}update(t){}G(){h.lt.T(this.x,10,this.S)}}const u={frames:60,width:768,height:768,backgroundColor:"#374a52",ut:{load:function(){h.Mt.T({key:"apple",src:"../public/assets/apple.png"})},update:function(){},G:function(){}}};new h(u),h.Entity.J("player"),h.Entity.J("enemies"),h.Entity.create("player",l,{}),h.Entity.create("player",l,{}),h.Entity.create("player",l,{}),h.Entity.create("player",l,{})})();